# Clearledgr AP v1 Environment Variables
# Copy to .env and fill in your values

# Core Configuration
DATABASE_URL=postgresql://clearledgr:clearledgr@localhost:5432/clearledgr
# Local fallback only when DATABASE_URL is unset:
CLEARLEDGR_DB_PATH=./clearledgr.db

# Temporal orchestration (required for production AP runs)
AP_TEMPORAL_ENABLED=true
AP_TEMPORAL_REQUIRED=true
AP_TEMPORAL_START_WORKER=false
TEMPORAL_ADDRESS=localhost:7233
TEMPORAL_NAMESPACE=default
TEMPORAL_AP_TASK_QUEUE=clearledgr-ap

# Slack approvals
SLACK_BOT_TOKEN=xoxb-your-bot-token
SLACK_SIGNING_SECRET=your-signing-secret
SLACK_APPROVAL_CHANNEL=#finance-approvals

# Teams approvals
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/your-webhook
TEAMS_SIGNING_SECRET=your-teams-signing-secret
TEAMS_ACTION_CALLBACK_URL=https://api.clearledgr.com/api/teams/actions

# Approval routing
AP_APPROVAL_CHANNELS=slack,teams
AP_APPROVAL_SURFACE=hybrid
AP_APPROVAL_THRESHOLD_CHAT_ONLY=5000
AP_APPROVAL_THRESHOLD=0
AP_APPROVAL_SLA_MINUTES=240
AP_WORKFLOW_STUCK_MINUTES=120
AP_REQUIRE_ATTACHMENT=true
AP_AMOUNT_ANOMALY_THRESHOLD=0.35
# Example:
# AP_VENDOR_RULES_JSON={"google":{"max_amount":5000,"require_invoice_number":true}}
AP_VENDOR_RULES_JSON=

# ERP posting
ERP_MODE=mock
ERP_CONNECTOR=netsuite
NETSUITE_ACCOUNT_ID=123456
NETSUITE_INTEGRATION_ID=clearledgr-ap-v1

# Agent runtime (Anthropic primary, OpenAI fallback)
AP_AGENT_MODE=mock
ANTHROPIC_API_KEY=
OPENAI_API_KEY=
AP_AGENT_ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
AP_AGENT_OPENAI_MODEL=gpt-4o-mini

# Gmail OAuth (autonomous Gmail autopilot)
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8000/gmail/callback

# Gmail Pub/Sub (optional)
GOOGLE_CLOUD_PROJECT=your-project
GMAIL_PUBSUB_TOPIC=projects/your-project/topics/gmail-push
GMAIL_PUBSUB_SUBSCRIPTION=projects/your-project/subscriptions/gmail-push-sub

# Autopilot tuning (optional)
GMAIL_AUTOPILOT_ENABLED=true
GMAIL_AUTOPILOT_MODE=both
GMAIL_POLL_CONCURRENCY=5

# Teams callback verification
TEAMS_BOT_APP_ID=
TEAMS_OPENID_CONFIG_URL=https://login.botframework.com/v1/.well-known/openidconfiguration
TEAMS_LEGACY_HMAC_ALLOWED=false
TEAMS_ALLOWED_TENANT_IDS=
